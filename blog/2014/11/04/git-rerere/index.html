<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="Hugo 0.31" />
    <link rel="shortcut icon" href="/images/favicon.ico">
    <link href="http://yantonov.com/index.xml" rel="alternate" type="application/rss+xml" title="(map solve problems)" />
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    
    <script src="https://apis.google.com/js/platform.js" async defer>{lang: 'ja'}</script>
    
    <link rel="stylesheet" href="https://yandex.st/highlightjs/8.0/styles/default.min.css">
    <script src="https://yandex.st/highlightjs/8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <title>Git rerere | (map solve problems)</title>
  </head>
  <body>
    <div id="wrap">
      
      <header class="site-header">
        <div class="site-header-left">
          <a class="site-header-title" href="http://yantonov.com/">(map solve problems)</a>
        </div>
      </header>
      <div class="container">
        <div id="main">

<div class="article">
  <header>
    <div class="article-header">
      <h1>Git rerere</h1>
      <div class="article-meta">
        <span class="posttime">2014/11/04</span>
        

      </div>
    </div>
    

  </header>
  <div class="content">
    <p>There is some usefull <a href="https://git-scm.com">git</a> command rerere (reuse recorded resolution). Sometimes especially for long lived branch you need to resolve same conflicts again and again. This command let you save the results of conflict resolution and apply it again when needed.</p>

<p>Let see how its works:</p>

<pre><code class="language-bash"># create test repo
git init rerere

# move to it
cd rerere

# enable rerere - reuse recorded resolution (its disabled by default)
git config rerere.enabled true

# add some file
echo &quot;test&quot; &gt; readme.txt
git add .
git commit -m &quot;initial&quot;

# add some changes
echo &quot;line1&quot; &gt;&gt; readme.txt
git add .
git commit -m &quot;1&quot;

# save first revision hash (used only to avoid hardcoded hash sums)
initialRevision=`git log HEAD^1 --pretty=format:&quot;%H&quot;`

# create second branch based on initial revision
# (simulate one long lived branch)
git checkout -b first $initialRevision
echo &quot;line2&quot; &gt;&gt; readme.txt
git add .
git commit -m &quot;2&quot;

# create third branch based again on initial revision
# (simulate one more long lived branch)
git checkout -b second $initialRevision
echo &quot;line2&quot; &gt;&gt; readme.txt
git add .
git commit -m &quot;2 again&quot;

# move to master
git checkout master

# merge with first long lived branch
git merge first

# resolve conflict and preserve line1
echo -e &quot;test\nline1&quot; &gt; readme.txt
git add .
git commit -m &quot;first merge&quot;

# now watch for output:
# 'Recorded resolution for 'readme.txt'.'
# git saves conflict resolution for readme.txt file

# now lets merge with second branch
# the same conflict has here

git merge second
# look at the output
# 'Resolved 'readme.txt' using previous resolution.'

cat readme.txt
# you can see the results of saved resolution without conflict markers
# means : &quot;test\nline1&quot;
</code></pre>

<p>This is pretty usefull for example, for package versions (pom files, project.clj), because such file fragments are strictly localized.</p>

<pre><code class="language-xml">...
    &lt;version&gt;1.2.3&lt;/version&gt;
...
</code></pre>

<p>Be caferul, this works for precisely same (charater by charater) conflicts and same files.
And one more, resolved conflicts older than 60 days will be pruned automatically, so you do not have to worry about repository size.</p>

<p><strong>Upd 1</strong> Multiple changes to same file</p>

<p>Suppose you have resolved several conflicts at the same file.
What will rerere do ? Lets see &hellip;</p>

<pre><code class="language-bash"># create test repo
git init rerere

# move to it
cd rerere

# enable rerere - reuse recorded resolution (its disabled by default)
git config rerere.enabled true

# add some file
echo -e &quot;first\nsecond\third\fourth&quot; &gt; readme.txt
git add .
git commit -m &quot;initial&quot;

# add some changes
echo -e &quot;first\nsecond 111\nthird\nfourth 111&quot; &gt; readme.txt
git add .
git commit -m &quot;111&quot;

# save first revision hash (used only to avoid hardcoded hash sums)
initialRevision=`git log HEAD^1 --pretty=format:&quot;%H&quot;`

# create second branch based on initial revision
# (simulate one long lived branch)
git checkout -b first $initialRevision
echo -e &quot;first\nsecond 222\nthird\nfourth 111&quot; &gt; readme.txt
git add .
git commit -m &quot;222&quot;

# create third branch based again on initial revision
# (simulate one more long lived branch)
git checkout -b second $initialRevision
echo -e &quot;first\nsecond 222\nthird\nfourth 333&quot; &gt; readme.txt
git add .
git commit -m &quot;222 and 333&quot;

# move to master
git checkout master

# merge with first long lived branch
git merge first

# resolve conflict and preserve 111
echo -e &quot;first\nsecond 111\nthird\nfourth 111&quot; &gt; readme.txt
git add .
git commit -m &quot;first merge&quot;

# now watch for output:
# 'Recorded resolution for 'readme.txt'.'
# git saves conflict resolution for readme.txt file

# now lets merge with second branch
# the same conflict has here

git merge second
# look at the output
# Automatic merge failed; fix conflicts and then commit the result.

cat readme.txt
# you can see the conflict markers (rerere will apply stored resolution only in case of same conflict for whole file)
# there are no partial changes !

# contents of the file:
# 'Resolved 'readme.txt' using previous resolution.'
# first
# &lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
# second 111
# third
# fourth 111
# =======
# second 222
# third
# fourth 333
# &gt;&gt;&gt;&gt;&gt;&gt;&gt; second
</code></pre>

<p>As you can see, there are no partial application.</p>

<p>Simple rule: same conflict for whole file -&gt; apply stored resolution, any differences -&gt; resolve manually and save it as another resolution sample.</p>

  </div>
  <footer>
    <div class="article-footer">
      

      
      

      <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yantonov" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      
      <div id="pagenavigation-next-prev">
        
        <div id="pagenavigation-next">
          <span class="pagenav-label">Previous</span>
          <a href="http://yantonov.com/blog/2014/11/03/platform-specific-build-event/">Platform specific build event</a>
        </div>
        
        
        <div id="pagenavigation-prev">
          <span class="pagenav-label">Next</span>
          <a href="http://yantonov.com/blog/2014/11/04/path-variable-for-gui-programs-mac-os/">PATH variable for gui programs (Mac Os)</a>
        </div>
        
      </div>
      
    </div>
  </footer>
</div>
        </div>
        <div class="sidebar">
  
  
  <div class="sidebar-content">
    <div class="sidebar-header">
      <span>Author</span>
    </div>
    <div id="author">
      <span>Yury Antonov</span>
      <div>
        
        <a href="https://twitter.com/yantonov"><i class="fa fa-twitter-square fa-2x" aria-hidden="true"></i></a>
        
        
        <a href="https://github.com/yantonov"><i class="fa fa-github-square fa-2x" aria-hidden="true"></i></a>
        
        
        
      </div>
    </div>
  </div>
  
    <div class="sidebar-content">
    <div class="sidebar-header">
      <span>RSS</span>
    </div>
    <div id="rss">
      <a href="http://yantonov.com/index.xml" type="application/rss+xml" target="_blank">
        <i class="fa fa-rss-square fa-2x" aria-hidden="true"></i>
      </a>
    </div>
  </div>
  
  <div class="sidebar-content">
    <div class="sidebar-header">
      <span>Categories</span>
    </div>
    <div class="categories">
      <ul>
        
        <li>
          <a href="/categories/.net"><span></span>.net (1)</a>
        </li>
        
        <li>
          <a href="/categories/ai"><span></span>ai (3)</a>
        </li>
        
        <li>
          <a href="/categories/algorithm"><span></span>algorithm (2)</a>
        </li>
        
        <li>
          <a href="/categories/alias"><span></span>alias (1)</a>
        </li>
        
        <li>
          <a href="/categories/angular"><span></span>angular (1)</a>
        </li>
        
        <li>
          <a href="/categories/automation"><span></span>automation (2)</a>
        </li>
        
        <li>
          <a href="/categories/blog"><span></span>blog (1)</a>
        </li>
        
        <li>
          <a href="/categories/bookmark"><span></span>bookmark (2)</a>
        </li>
        
        <li>
          <a href="/categories/bookmarks"><span></span>bookmarks (1)</a>
        </li>
        
        <li>
          <a href="/categories/build"><span></span>build (1)</a>
        </li>
        
        <li>
          <a href="/categories/cache"><span></span>cache (2)</a>
        </li>
        
        <li>
          <a href="/categories/caching"><span></span>caching (1)</a>
        </li>
        
        <li>
          <a href="/categories/church-numerals"><span></span>church-numerals (1)</a>
        </li>
        
        <li>
          <a href="/categories/clojure"><span></span>clojure (1)</a>
        </li>
        
        <li>
          <a href="/categories/cmd"><span></span>cmd (1)</a>
        </li>
        
        <li>
          <a href="/categories/computer-vision"><span></span>computer-vision (1)</a>
        </li>
        
        <li>
          <a href="/categories/conditional"><span></span>conditional (1)</a>
        </li>
        
        <li>
          <a href="/categories/config"><span></span>config (1)</a>
        </li>
        
        <li>
          <a href="/categories/conflict-free-replicated-data-types"><span></span>conflict-free-replicated-data-types (1)</a>
        </li>
        
        <li>
          <a href="/categories/connection"><span></span>connection (1)</a>
        </li>
        
        <li>
          <a href="/categories/consensus"><span></span>consensus (1)</a>
        </li>
        
        <li>
          <a href="/categories/course"><span></span>course (1)</a>
        </li>
        
        <li>
          <a href="/categories/cproj"><span></span>cproj (1)</a>
        </li>
        
        <li>
          <a href="/categories/crdt"><span></span>crdt (1)</a>
        </li>
        
        <li>
          <a href="/categories/cs"><span></span>cs (1)</a>
        </li>
        
        <li>
          <a href="/categories/css"><span></span>css (1)</a>
        </li>
        
        <li>
          <a href="/categories/data-structures"><span></span>data-structures (1)</a>
        </li>
        
        <li>
          <a href="/categories/deep-learning"><span></span>deep-learning (1)</a>
        </li>
        
        <li>
          <a href="/categories/delete-package"><span></span>delete-package (1)</a>
        </li>
        
        <li>
          <a href="/categories/distributed-systems"><span></span>distributed-systems (1)</a>
        </li>
        
        <li>
          <a href="/categories/dvcs"><span></span>dvcs (2)</a>
        </li>
        
        <li>
          <a href="/categories/emacs"><span></span>emacs (1)</a>
        </li>
        
        <li>
          <a href="/categories/emacs-lisp"><span></span>emacs-lisp (1)</a>
        </li>
        
        <li>
          <a href="/categories/encoding"><span></span>encoding (1)</a>
        </li>
        
        <li>
          <a href="/categories/environment"><span></span>environment (2)</a>
        </li>
        
        <li>
          <a href="/categories/eshell"><span></span>eshell (1)</a>
        </li>
        
        <li>
          <a href="/categories/export"><span></span>export (1)</a>
        </li>
        
        <li>
          <a href="/categories/feeds"><span></span>feeds (1)</a>
        </li>
        
        <li>
          <a href="/categories/filename"><span></span>filename (1)</a>
        </li>
        
        <li>
          <a href="/categories/fprog"><span></span>fprog (3)</a>
        </li>
        
        <li>
          <a href="/categories/fun"><span></span>fun (1)</a>
        </li>
        
        <li>
          <a href="/categories/functional-programming"><span></span>functional-programming (2)</a>
        </li>
        
        <li>
          <a href="/categories/functional-test"><span></span>functional-test (1)</a>
        </li>
        
        <li>
          <a href="/categories/git"><span></span>git (5)</a>
        </li>
        
        <li>
          <a href="/categories/golang"><span></span>golang (1)</a>
        </li>
        
        <li>
          <a href="/categories/haskell"><span></span>haskell (3)</a>
        </li>
        
        <li>
          <a href="/categories/headers"><span></span>headers (1)</a>
        </li>
        
        <li>
          <a href="/categories/health"><span></span>health (1)</a>
        </li>
        
        <li>
          <a href="/categories/healthy-programmer"><span></span>healthy-programmer (1)</a>
        </li>
        
        <li>
          <a href="/categories/http"><span></span>http (1)</a>
        </li>
        
        <li>
          <a href="/categories/ide"><span></span>ide (1)</a>
        </li>
        
        <li>
          <a href="/categories/interview"><span></span>interview (1)</a>
        </li>
        
        <li>
          <a href="/categories/ios"><span></span>ios (1)</a>
        </li>
        
        <li>
          <a href="/categories/javascript"><span></span>javascript (1)</a>
        </li>
        
        <li>
          <a href="/categories/kalman-filter"><span></span>kalman-filter (1)</a>
        </li>
        
        <li>
          <a href="/categories/keyboard"><span></span>keyboard (1)</a>
        </li>
        
        <li>
          <a href="/categories/lambda-calculus"><span></span>lambda-calculus (1)</a>
        </li>
        
        <li>
          <a href="/categories/lambda_calculus"><span></span>lambda_calculus (1)</a>
        </li>
        
        <li>
          <a href="/categories/leiningen"><span></span>leiningen (1)</a>
        </li>
        
        <li>
          <a href="/categories/linked-list"><span></span>linked-list (1)</a>
        </li>
        
        <li>
          <a href="/categories/links"><span></span>links (1)</a>
        </li>
        
        <li>
          <a href="/categories/lisp"><span></span>lisp (2)</a>
        </li>
        
        <li>
          <a href="/categories/logic"><span></span>logic (1)</a>
        </li>
        
        <li>
          <a href="/categories/mac"><span></span>mac (4)</a>
        </li>
        
        <li>
          <a href="/categories/mac-os"><span></span>mac-os (2)</a>
        </li>
        
        <li>
          <a href="/categories/machine_learning"><span></span>machine_learning (2)</a>
        </li>
        
        <li>
          <a href="/categories/macos"><span></span>macos (1)</a>
        </li>
        
        <li>
          <a href="/categories/matplotlib"><span></span>matplotlib (1)</a>
        </li>
        
        <li>
          <a href="/categories/memory"><span></span>memory (1)</a>
        </li>
        
        <li>
          <a href="/categories/mercurial"><span></span>mercurial (3)</a>
        </li>
        
        <li>
          <a href="/categories/merge"><span></span>merge (1)</a>
        </li>
        
        <li>
          <a href="/categories/ml"><span></span>ml (3)</a>
        </li>
        
        <li>
          <a href="/categories/nautilus"><span></span>nautilus (1)</a>
        </li>
        
        <li>
          <a href="/categories/neural-network"><span></span>neural-network (1)</a>
        </li>
        
        <li>
          <a href="/categories/neural_network"><span></span>neural_network (1)</a>
        </li>
        
        <li>
          <a href="/categories/optimization"><span></span>optimization (1)</a>
        </li>
        
        <li>
          <a href="/categories/packages"><span></span>packages (1)</a>
        </li>
        
        <li>
          <a href="/categories/papers"><span></span>papers (1)</a>
        </li>
        
        <li>
          <a href="/categories/pattern-recognision"><span></span>pattern-recognision (1)</a>
        </li>
        
        <li>
          <a href="/categories/pcomplete"><span></span>pcomplete (1)</a>
        </li>
        
        <li>
          <a href="/categories/pkg"><span></span>pkg (1)</a>
        </li>
        
        <li>
          <a href="/categories/plugin"><span></span>plugin (1)</a>
        </li>
        
        <li>
          <a href="/categories/podcast"><span></span>podcast (1)</a>
        </li>
        
        <li>
          <a href="/categories/problem"><span></span>problem (2)</a>
        </li>
        
        <li>
          <a href="/categories/python"><span></span>python (1)</a>
        </li>
        
        <li>
          <a href="/categories/python3"><span></span>python3 (1)</a>
        </li>
        
        <li>
          <a href="/categories/raft"><span></span>raft (1)</a>
        </li>
        
        <li>
          <a href="/categories/react"><span></span>react (1)</a>
        </li>
        
        <li>
          <a href="/categories/repl"><span></span>repl (1)</a>
        </li>
        
        <li>
          <a href="/categories/rerere"><span></span>rerere (1)</a>
        </li>
        
        <li>
          <a href="/categories/review"><span></span>review (1)</a>
        </li>
        
        <li>
          <a href="/categories/rfc"><span></span>rfc (1)</a>
        </li>
        
        <li>
          <a href="/categories/rss"><span></span>rss (1)</a>
        </li>
        
        <li>
          <a href="/categories/scm"><span></span>scm (5)</a>
        </li>
        
        <li>
          <a href="/categories/script"><span></span>script (1)</a>
        </li>
        
        <li>
          <a href="/categories/shell"><span></span>shell (4)</a>
        </li>
        
        <li>
          <a href="/categories/shortcut"><span></span>shortcut (1)</a>
        </li>
        
        <li>
          <a href="/categories/site-generator"><span></span>site-generator (1)</a>
        </li>
        
        <li>
          <a href="/categories/sln"><span></span>sln (1)</a>
        </li>
        
        <li>
          <a href="/categories/sqlite"><span></span>sqlite (1)</a>
        </li>
        
        <li>
          <a href="/categories/stackoverflow"><span></span>stackoverflow (1)</a>
        </li>
        
        <li>
          <a href="/categories/static"><span></span>static (1)</a>
        </li>
        
        <li>
          <a href="/categories/static-site-generator"><span></span>static-site-generator (1)</a>
        </li>
        
        <li>
          <a href="/categories/task"><span></span>task (1)</a>
        </li>
        
        <li>
          <a href="/categories/test"><span></span>test (1)</a>
        </li>
        
        <li>
          <a href="/categories/tip"><span></span>tip (2)</a>
        </li>
        
        <li>
          <a href="/categories/trick"><span></span>trick (2)</a>
        </li>
        
        <li>
          <a href="/categories/turing-machine"><span></span>turing-machine (1)</a>
        </li>
        
        <li>
          <a href="/categories/ubuntu"><span></span>ubuntu (2)</a>
        </li>
        
        <li>
          <a href="/categories/ui"><span></span>ui (1)</a>
        </li>
        
        <li>
          <a href="/categories/usability"><span></span>usability (1)</a>
        </li>
        
        <li>
          <a href="/categories/user_experience"><span></span>user_experience (1)</a>
        </li>
        
        <li>
          <a href="/categories/ux"><span></span>ux (1)</a>
        </li>
        
        <li>
          <a href="/categories/vcs"><span></span>vcs (4)</a>
        </li>
        
        <li>
          <a href="/categories/vsc"><span></span>vsc (1)</a>
        </li>
        
        <li>
          <a href="/categories/watch"><span></span>watch (1)</a>
        </li>
        
        <li>
          <a href="/categories/watchers"><span></span>watchers (1)</a>
        </li>
        
        <li>
          <a href="/categories/web"><span></span>web (1)</a>
        </li>
        
        <li>
          <a href="/categories/webpack"><span></span>webpack (1)</a>
        </li>
        
        <li>
          <a href="/categories/wifi"><span></span>wifi (1)</a>
        </li>
        
        <li>
          <a href="/categories/workflow"><span></span>workflow (1)</a>
        </li>
        
        <li>
          <a href="/categories/xamarin"><span></span>xamarin (1)</a>
        </li>
        
      </ul>
    </div>
  </div>
  
</div>

      </div>
      <footer>
        <div id="site-footer-wrap">
          <div id="site-footer">
            <span>Powered by <a href="https://gohugo.io/">Hugo</a>.</span>
            <span>
              
              Copyright (c) 2017, <a href="http://yantonov.com/">(map solve problems)</a>
              
            </span>
          </div>
        </div>
      </footer>
    </div>
  </body>
</html>

