<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="Hugo 0.18.1" />
    <link rel="shortcut icon" href="/images/favicon.ico">
    <link href="http://yantonov.com/index.xml" rel="alternate" type="application/rss+xml" title="(map solve problems)" />
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    
    <script src="https://apis.google.com/js/platform.js" async defer>{lang: 'ja'}</script>
    
    <link rel="stylesheet" href="https://yandex.st/highlightjs/8.0/styles/default.min.css">
    <script src="https://yandex.st/highlightjs/8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <title>PATH variable for gui programs (Mac Os) | (map solve problems)</title>
  </head>
  <body>
    <div id="wrap">
      
      <header class="site-header">
        <div class="site-header-left">
          <a class="site-header-title" href="http://yantonov.com/">(map solve problems)</a>
        </div>
      </header>
      <div class="container">
        <div id="main">

<div class="article">
  <header>
    <div class="article-header">
      <h1>PATH variable for gui programs (Mac Os)</h1>
      <div class="article-meta">
        <span class="posttime">2014/11/04</span>
        

      </div>
    </div>
    

  </header>
  <div class="content">
    <p><strong>Foreword</strong>:<br />
Sometimes you need to edit PATH variable.<br />
Of course you edit .bash_profile, .bashrc, .profile or other scripts and this works fine <strong>only in terminal</strong>.<br />
GUI apps at Mac Os use its own PATH variable (moreover has its own environment), which can be set using &lsquo;launchctl setenv PATH <PATH_VALUE>&rsquo;.<br />
So you need to setup PATH for GUI apps correctly, and do not forget about PATH var for terminal.</p>

<p>Moreover, after update to Mac Os X 10.10 Yosemite i was wondering about this:</p>

<pre><code class="language-bash">launchctl getenv PATH

# empty response
</code></pre>

<p>Reasons for such behaviour is unknown for me now (even after readind dozen of man pages and all latest recipes connected to this issue at stackoverflow).
So if you add something to PATH:</p>

<pre><code class="language-bash">OLD=`launchctl getenv PATH`
NEW=&lt;your_path&gt;:$OLD
launchctl setenv PATH
</code></pre>

<p>then you cant access from gui programs some applications at system directories (/bin:/sbin etc).<br />
I just decided to init empty PATH var by contents of /etc/paths.</p>

<p>The main question: what is the way to set up GUI PATH variable using script, reuse PATH variable from terminal settings, and start this script automatically.
<a href="https://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/BPSystemStartup/Chapters/CreatingLaunchdJobs.html">Daemon and agents mechanism</a> gives an answer.</p>

<p>This script to setup PATH var:</p>

<p>fix-gui-path.sh</p>

<pre><code class="language-bash">#!/bin/bash
# patch PATH for gui (and spotlight in particular)

# save old value of PATH var
OLD_GUI_PATH=`launchctl getenv PATH`

# if initial path is empty fill it using /etc/paths, otherwise
# you cant use apps in system directories
if [[ -z &quot;$OLD_GUI_PATH&quot; ]]
then
    OLD_GUI_PATH=`cat /etc/paths | tr &quot;\n&quot; &quot;:&quot; | sed 's/:$//'`
fi

# load .profile (i save terminal PATH modification here)
# so i want to reuse this settings for gui applications
# all my additional paths are saved as ADDITIONAL_PATH variable
# one of my .profile file looks like
# export ADDITIONAL_PATH=...
source ~/.profile

# patch gui PATH varible
if [[ $OLD_GUI_PATH != *$ADDITIONAL_PATH* ]]
then
    NEW_GUI_PATH=$ADDITIONAL_PATH:$OLD_GUI_PATH
    launchctl setenv PATH $NEW_GUI_PATH
fi
</code></pre>

<p>Than create plist file to inform launchd daemon to start your script:</p>

<p>com.example.gui.path.fix</p>

<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;
&lt;plist version=&quot;1.0&quot;&gt;
&lt;dict&gt;
    &lt;key&gt;Label&lt;/key&gt;
    &lt;string&gt;com.example.gui.path.fix&lt;/string&gt;
    &lt;key&gt;ProgramArguments&lt;/key&gt;
    &lt;array&gt;
        &lt;string&gt;***PATH_TO_SCRIPT***/fix-gui-path.sh&lt;/string&gt;
    &lt;/array&gt;
    &lt;!-- to avoid absolute path
        &lt;string&gt;sh&lt;/string&gt;
        &lt;string&gt;-c&lt;/string&gt;
        &lt;string&gt;&quot;$HOME/***RELATIVE_PATH***&lt;/string&gt;
    --&gt;
    &lt;key&gt;RunAtLoad&lt;/key&gt;
    &lt;true/&gt;
    &lt;key&gt;ExitTimeOut&lt;/key&gt;
    &lt;integer&gt;0&lt;/integer&gt;
    &lt;key&gt;ProcessType&lt;/key&gt;
    &lt;string&gt;Background&lt;/string&gt;
&lt;/dict&gt;
&lt;/plist&gt;
</code></pre>

<p>where
<strong><em>PATH_TO_SCRIPT</em></strong> - absolute path to fix-gui-path.sh script descrived above,
<strong><em>RELATIVE_PATH</em></strong> - relative path inside user directory.
Place this file into ~/Library/LaunchAgents/.</p>

<p>Using this all your gui apps will use terminal PATH variable (no need to set PATH twice for terminal and gui apps) and the problem with gui PATH also will be solved.</p>

  </div>
  <footer>
    <div class="article-footer">
      

      
      

      <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'yantonov';
    var disqus_identifier = 'http:\/\/yantonov.com\/blog\/2014\/11\/04\/path-variable-for-gui-programs-mac-os\/';
    var disqus_title = 'PATH variable for gui programs (Mac Os)';
    var disqus_url = 'http:\/\/yantonov.com\/blog\/2014\/11\/04\/path-variable-for-gui-programs-mac-os\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      
      <div id="pagenavigation-next-prev">
        
        <div id="pagenavigation-next">
          <span class="pagenav-label">Previous</span>
          <a href="http://yantonov.com/blog/2014/11/04/git-rerere/">Git rerere</a>
        </div>
        
        
        <div id="pagenavigation-prev">
          <span class="pagenav-label">Next</span>
          <a href="http://yantonov.com/blog/2014/11/09/programmable-completion-for-git-and-mercurial/">programmable completion for git and mercurial</a>
        </div>
        
      </div>
      
    </div>
  </footer>
</div>
        </div>
        <div class="sidebar">
  
  
  <div class="sidebar-content">
    <div class="sidebar-header">
      <span>Author</span>
    </div>
    <div id="author">
      <span>Yury Antonov</span>
      <div>
        
        <a href="https://twitter.com/yantonov"><i class="fa fa-twitter-square fa-2x" aria-hidden="true"></i></a>
        
        
        <a href="https://github.com/yantonov"><i class="fa fa-github-square fa-2x" aria-hidden="true"></i></a>
        
        
        
      </div>
    </div>
  </div>
  
    <div class="sidebar-content">
    <div class="sidebar-header">
      <span>RSS</span>
    </div>
    <div id="rss">
      <a href="http://yantonov.com/index.xml" type="application/rss+xml" target="_blank">
        <i class="fa fa-rss-square fa-2x" aria-hidden="true"></i>
      </a>
    </div>
  </div>
  
  <div class="sidebar-content">
    <div class="sidebar-header">
      <span>Categories</span>
    </div>
    <div class="categories">
      <ul>
        
        <li>
          <a href="/categories/.net"><span></span>.net (1)</a>
        </li>
        
        <li>
          <a href="/categories/ai"><span></span>ai (3)</a>
        </li>
        
        <li>
          <a href="/categories/algorithm"><span></span>algorithm (2)</a>
        </li>
        
        <li>
          <a href="/categories/alias"><span></span>alias (1)</a>
        </li>
        
        <li>
          <a href="/categories/angular"><span></span>angular (1)</a>
        </li>
        
        <li>
          <a href="/categories/automation"><span></span>automation (2)</a>
        </li>
        
        <li>
          <a href="/categories/bookmark"><span></span>bookmark (2)</a>
        </li>
        
        <li>
          <a href="/categories/bookmarks"><span></span>bookmarks (1)</a>
        </li>
        
        <li>
          <a href="/categories/build"><span></span>build (1)</a>
        </li>
        
        <li>
          <a href="/categories/cache"><span></span>cache (2)</a>
        </li>
        
        <li>
          <a href="/categories/caching"><span></span>caching (1)</a>
        </li>
        
        <li>
          <a href="/categories/church-numerals"><span></span>church-numerals (1)</a>
        </li>
        
        <li>
          <a href="/categories/clojure"><span></span>clojure (1)</a>
        </li>
        
        <li>
          <a href="/categories/cmd"><span></span>cmd (1)</a>
        </li>
        
        <li>
          <a href="/categories/conditional"><span></span>conditional (1)</a>
        </li>
        
        <li>
          <a href="/categories/config"><span></span>config (1)</a>
        </li>
        
        <li>
          <a href="/categories/conflict-free-replicated-data-types"><span></span>conflict-free-replicated-data-types (1)</a>
        </li>
        
        <li>
          <a href="/categories/connection"><span></span>connection (1)</a>
        </li>
        
        <li>
          <a href="/categories/consensus"><span></span>consensus (1)</a>
        </li>
        
        <li>
          <a href="/categories/course"><span></span>course (1)</a>
        </li>
        
        <li>
          <a href="/categories/cproj"><span></span>cproj (1)</a>
        </li>
        
        <li>
          <a href="/categories/crdt"><span></span>crdt (1)</a>
        </li>
        
        <li>
          <a href="/categories/cs"><span></span>cs (1)</a>
        </li>
        
        <li>
          <a href="/categories/data-structures"><span></span>data-structures (1)</a>
        </li>
        
        <li>
          <a href="/categories/deep-learning"><span></span>deep-learning (1)</a>
        </li>
        
        <li>
          <a href="/categories/delete-package"><span></span>delete-package (1)</a>
        </li>
        
        <li>
          <a href="/categories/distributed-systems"><span></span>distributed-systems (1)</a>
        </li>
        
        <li>
          <a href="/categories/dvcs"><span></span>dvcs (2)</a>
        </li>
        
        <li>
          <a href="/categories/emacs"><span></span>emacs (1)</a>
        </li>
        
        <li>
          <a href="/categories/emacs-lisp"><span></span>emacs-lisp (1)</a>
        </li>
        
        <li>
          <a href="/categories/encoding"><span></span>encoding (1)</a>
        </li>
        
        <li>
          <a href="/categories/environment"><span></span>environment (2)</a>
        </li>
        
        <li>
          <a href="/categories/eshell"><span></span>eshell (1)</a>
        </li>
        
        <li>
          <a href="/categories/export"><span></span>export (1)</a>
        </li>
        
        <li>
          <a href="/categories/feeds"><span></span>feeds (1)</a>
        </li>
        
        <li>
          <a href="/categories/filename"><span></span>filename (1)</a>
        </li>
        
        <li>
          <a href="/categories/fprog"><span></span>fprog (3)</a>
        </li>
        
        <li>
          <a href="/categories/fun"><span></span>fun (1)</a>
        </li>
        
        <li>
          <a href="/categories/functional-programming"><span></span>functional-programming (1)</a>
        </li>
        
        <li>
          <a href="/categories/functional-test"><span></span>functional-test (1)</a>
        </li>
        
        <li>
          <a href="/categories/git"><span></span>git (5)</a>
        </li>
        
        <li>
          <a href="/categories/golang"><span></span>golang (1)</a>
        </li>
        
        <li>
          <a href="/categories/haskell"><span></span>haskell (3)</a>
        </li>
        
        <li>
          <a href="/categories/headers"><span></span>headers (1)</a>
        </li>
        
        <li>
          <a href="/categories/health"><span></span>health (1)</a>
        </li>
        
        <li>
          <a href="/categories/healthy-programmer"><span></span>healthy-programmer (1)</a>
        </li>
        
        <li>
          <a href="/categories/http"><span></span>http (1)</a>
        </li>
        
        <li>
          <a href="/categories/ide"><span></span>ide (1)</a>
        </li>
        
        <li>
          <a href="/categories/interview"><span></span>interview (1)</a>
        </li>
        
        <li>
          <a href="/categories/ios"><span></span>ios (1)</a>
        </li>
        
        <li>
          <a href="/categories/javascript"><span></span>javascript (1)</a>
        </li>
        
        <li>
          <a href="/categories/keyboard"><span></span>keyboard (1)</a>
        </li>
        
        <li>
          <a href="/categories/lambda-calculus"><span></span>lambda-calculus (1)</a>
        </li>
        
        <li>
          <a href="/categories/lambda_calculus"><span></span>lambda_calculus (1)</a>
        </li>
        
        <li>
          <a href="/categories/leiningen"><span></span>leiningen (1)</a>
        </li>
        
        <li>
          <a href="/categories/linked-list"><span></span>linked-list (1)</a>
        </li>
        
        <li>
          <a href="/categories/links"><span></span>links (1)</a>
        </li>
        
        <li>
          <a href="/categories/lisp"><span></span>lisp (1)</a>
        </li>
        
        <li>
          <a href="/categories/logic"><span></span>logic (1)</a>
        </li>
        
        <li>
          <a href="/categories/mac"><span></span>mac (4)</a>
        </li>
        
        <li>
          <a href="/categories/mac-os"><span></span>mac-os (2)</a>
        </li>
        
        <li>
          <a href="/categories/machine_learning"><span></span>machine_learning (2)</a>
        </li>
        
        <li>
          <a href="/categories/macos"><span></span>macos (1)</a>
        </li>
        
        <li>
          <a href="/categories/matplotlib"><span></span>matplotlib (1)</a>
        </li>
        
        <li>
          <a href="/categories/mercurial"><span></span>mercurial (3)</a>
        </li>
        
        <li>
          <a href="/categories/merge"><span></span>merge (1)</a>
        </li>
        
        <li>
          <a href="/categories/ml"><span></span>ml (3)</a>
        </li>
        
        <li>
          <a href="/categories/nautilus"><span></span>nautilus (1)</a>
        </li>
        
        <li>
          <a href="/categories/neural_network"><span></span>neural_network (1)</a>
        </li>
        
        <li>
          <a href="/categories/optimization"><span></span>optimization (1)</a>
        </li>
        
        <li>
          <a href="/categories/packages"><span></span>packages (1)</a>
        </li>
        
        <li>
          <a href="/categories/papers"><span></span>papers (1)</a>
        </li>
        
        <li>
          <a href="/categories/pcomplete"><span></span>pcomplete (1)</a>
        </li>
        
        <li>
          <a href="/categories/pkg"><span></span>pkg (1)</a>
        </li>
        
        <li>
          <a href="/categories/plugin"><span></span>plugin (1)</a>
        </li>
        
        <li>
          <a href="/categories/problem"><span></span>problem (2)</a>
        </li>
        
        <li>
          <a href="/categories/python"><span></span>python (1)</a>
        </li>
        
        <li>
          <a href="/categories/python3"><span></span>python3 (1)</a>
        </li>
        
        <li>
          <a href="/categories/raft"><span></span>raft (1)</a>
        </li>
        
        <li>
          <a href="/categories/react"><span></span>react (1)</a>
        </li>
        
        <li>
          <a href="/categories/repl"><span></span>repl (1)</a>
        </li>
        
        <li>
          <a href="/categories/rerere"><span></span>rerere (1)</a>
        </li>
        
        <li>
          <a href="/categories/review"><span></span>review (1)</a>
        </li>
        
        <li>
          <a href="/categories/rfc"><span></span>rfc (1)</a>
        </li>
        
        <li>
          <a href="/categories/rss"><span></span>rss (1)</a>
        </li>
        
        <li>
          <a href="/categories/scm"><span></span>scm (5)</a>
        </li>
        
        <li>
          <a href="/categories/script"><span></span>script (1)</a>
        </li>
        
        <li>
          <a href="/categories/shell"><span></span>shell (4)</a>
        </li>
        
        <li>
          <a href="/categories/shortcut"><span></span>shortcut (1)</a>
        </li>
        
        <li>
          <a href="/categories/sln"><span></span>sln (1)</a>
        </li>
        
        <li>
          <a href="/categories/sqlite"><span></span>sqlite (1)</a>
        </li>
        
        <li>
          <a href="/categories/stackoverflow"><span></span>stackoverflow (1)</a>
        </li>
        
        <li>
          <a href="/categories/task"><span></span>task (1)</a>
        </li>
        
        <li>
          <a href="/categories/test"><span></span>test (1)</a>
        </li>
        
        <li>
          <a href="/categories/tip"><span></span>tip (2)</a>
        </li>
        
        <li>
          <a href="/categories/trick"><span></span>trick (2)</a>
        </li>
        
        <li>
          <a href="/categories/ubuntu"><span></span>ubuntu (2)</a>
        </li>
        
        <li>
          <a href="/categories/ui"><span></span>ui (1)</a>
        </li>
        
        <li>
          <a href="/categories/usability"><span></span>usability (1)</a>
        </li>
        
        <li>
          <a href="/categories/user_experience"><span></span>user_experience (1)</a>
        </li>
        
        <li>
          <a href="/categories/ux"><span></span>ux (1)</a>
        </li>
        
        <li>
          <a href="/categories/vcs"><span></span>vcs (4)</a>
        </li>
        
        <li>
          <a href="/categories/vsc"><span></span>vsc (1)</a>
        </li>
        
        <li>
          <a href="/categories/wifi"><span></span>wifi (1)</a>
        </li>
        
        <li>
          <a href="/categories/workflow"><span></span>workflow (1)</a>
        </li>
        
        <li>
          <a href="/categories/xamarin"><span></span>xamarin (1)</a>
        </li>
        
      </ul>
    </div>
  </div>
  
</div>

      </div>
      <footer>
        <div id="site-footer-wrap">
          <div id="site-footer">
            <span>Powered by <a href="https://gohugo.io/">Hugo</a>.</span>
            <span>
              
              Copyright (c) 2017, <a href="http://yantonov.com/">(map solve problems)</a>
              
            </span>
          </div>
        </div>
      </footer>
    </div>
  </body>
</html>

